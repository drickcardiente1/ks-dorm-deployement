{% block content %}
<!-- Fixed navbar -->
{% url 'room_status_occupied_admin' as room_status_occupied_admin %}
{% url 'complaint_pending_admin' as complaint_pending_admin %}
{% url 'users_admin' as users_admin %}
{% url 'rules' as rules %}
{% url 'agreement' as agreement %}
{% url 'notifications' as notifications %}
<nav class="navbar navbar-expand-lg  " style="background-color:#2E4053">
    <div class="container">
        <a class="navbar-brand text-white" href="{% url 'room_status_all_admin'%}" ><em>Kâ€™s Dormitory</em></a>
        <div class=" " id="navbarMain">
            <ul class="navbar-nav ms-auto  mb-lg-0">
                {% if user.is_authenticated %}
                <li class="nav-item">
                         <span class="nav-link  m-0 p-0 " aria-current="page"
                               style="text-transform: capitalize; ">
                                <span class="fw-bold me-2 border-end border-2  border-secondary d-inline">
                                    <i class="fa-solid fa-user-gear" style="font-size:16px; color:white;"></i>
                                 </span>
                                <span  class=" text-white">
                                     <strong>{{request.user.username}}</strong>
                                </span>
                        <div class="btn-group">
                          <button class="btn  btn-dark  dropdown-toggle  border-0 position-relative" type="button" data-bs-toggle="dropdown"
                                  aria-expanded="false" style="background-color:#2E4053"></button>

                          <ul class="dropdown-menu dropdown-menu-end p-0 m-0 rounded-0 position-absolute top-100 end-0" style="z-index: 9999; font-size:12px;">
                                  <li>
                                  <a class="nav-link text-center  text-dark"   aria-current="page" href="{% url 'profile_admin'%}">
                                  <i class="fa-solid fa-user"></i>
                                     Profile
                                  </a>
                                  </li>
                          <li>
                          <a class="nav-link text-center  text-dark"  aria-current="page" href="{% url 'admin_QRCODE'%}">
                             <i class="fa-solid fa-qrcode" ></i>
                             QRCODE
                          </a>
                          </li>


                          <li>
                          <a class="nav-link text-center  text-dark"  aria-current="page" href="{% url 'home'%}">
                             <i class="fa-solid fa-eye"></i>
                             Tenant View
                          </a>
                          </li>

                          <li>
                          <a class="nav-link text-center  text-dark mt-1"   aria-current="page" href="{% url 'logout'%}">

                            <i class="fa-solid fa-right-from-bracket"></i>
                             logout
                          </a>
                          </li>
                          </ul>
                        </div>

                         </span>

                    {% else %}
                <li class="nav-item">
                    <a class="nav-link    text-dark" aria-current="page" href="{% url 'login'%}">
                        Login
                    </a>
                </li>
                {% endif %}
            </ul>
        </div>
    </div>
</nav>



<nav class="navbar sticky-top navbar-expand-lg navbar-light bg-light border-bottom shadow  bg-body " style="font-size:16px;">
    <div class="container p-0 px-1">
        <ul class="nav justify-content-center">
            <a class="nav-link my-link   text-dark  {% if request.path == '/room_status_occupied_admin' %}active{% endif %}" href="{% url 'room_status_all_admin'%}">
                <i class="fa-solid fa-door-closed" style="color:#2E4053"></i>
                <span class="d-none d-lg-inline  ">Rooms</span>
            </a>

            <a class="nav-link  my-link   text-dark  {% if request.path == '/complaint_pending_admin' %}active{% endif %}" href="{% url 'complaint_pending_admin'%}">
                <i class="fa-solid fa-clipboard" style="color:#2E4053 "></i>
                <span class="d-none d-lg-inline  ">Complaint</span>
            </a>

            <a class="nav-link my-link text-dark  {% if request.path == '/users_admin' %}active{% endif %}" href="{% url 'users_admin'%}" id="search-active-link">
                <i class="fa-solid fa-user" style="color:#2E4053"></i>
                <span class="d-none d-lg-inline  ">Users</span>
            </a>
            <a class="nav-link  my-link  text-dark  {% if request.path == '/rules_admin' %}active{% endif %}" href="{% url 'rules_admin'%}">
                <i class="fa-solid fa-list-ol" style="color:#2E4053"></i>
                <span class="d-none d-lg-inline  " >Rules</span>
            </a>
            <a class="nav-link my-link text-dark  {% if request.path == '/agreement_admin' %}active{% endif %}"  href="{% url 'agreement_admin'%}">
                <i class="fa-solid fa-file-signature" style="color:#2E4053"></i>
                <span class="d-none d-lg-inline  ">Agreement</span>
            </a>
            <a class="nav-link my-link text-dark {% if request.path == '/reports_admin' %}active{% endif %}" href="{% url 'reports_admin'%}">
                <i class="fa-solid fa-square-poll-horizontal" style="color:#2E4053"></i>
                <span class="d-none d-lg-inline  ">Reports</span>
            </a>

        </ul>


        <div class="    " id="navbarTogglerDemo02">


            <ul class="nav m-0 p-0">
                <div id="notification-div">
                    <a class="nav-link my-link text-dark position-relative {% if request.path == '/notification_admin/' %}active{% endif %}" href="{% url 'notification_admin'%}">
                        <i class="fa-solid fa-bell" style="color:#2E4053" id="bell_shake"></i>
                        {% if user.is_authenticated %}
                        {% if sum_notification_count_admin > 0 %}
                        <span class="position-absolute top-10 start-100 translate-middle badge rounded-pill bg-danger">
            {{ sum_notification_count_admin }}<span class="visually-hidden">unread messages</span>
        </span>
                        {% endif %}
                        {% else %}
                        {% endif %}
                    </a>
                </div>


            </ul>
        </div>
    </div>
</nav>






<style>
.nav-link.active {
  border-bottom: 3px solid #2E4053;
}

a {
  text-decoration: none; /* Remove the default underline */
  border-bottom: 2px solid transparent; /* Add a new underline */
}

.my-link:hover {
    background-color: rgba(241, 196, 15, 0.1);
    border-bottom: 3px solid #F1C40F;
}

.nav-link:hover svg {
}

.nav-link:hover span {

}
#bell_shake:hover {
  /* Start the shake animation and make the animation last for 0.5 seconds */
  animation: shake 0.5s;


  /* When the animation is finished, start again */
  animation-iteration-count: infinite;
}

@keyframes shake {
  0% { transform: rotate(0); }
  15% { transform: rotate(10deg); }
  30% { transform: rotate(-10deg); }
  45% { transform: rotate(8deg); }
  60% { transform: rotate(-8deg); }
  75% { transform: rotate(4deg); }
  85% { transform: rotate(-4deg); }
  92% { transform: rotate(2deg); }
  100% { transform: rotate(0); }
}
</style>

<script>
    var notificationDiv = document.getElementById('notification-div');
    setInterval(function() {
        fetch(location.href)
            .then(function(response) {
                return response.text();
            })
            .then(function(html) {
                var newDiv = document.createElement('div');
                newDiv.innerHTML = html;
                var newNotificationDiv = newDiv.querySelector('#notification-div');
                notificationDiv.innerHTML = newNotificationDiv.innerHTML;
            })
            .catch(function(err) {
                console.error(err);
            });
    }, 2000);
</script>
{% endblock %}